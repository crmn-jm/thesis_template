%%%%%%%%%%%%%%%%%%%%%%%%%
% !TEX TS-program = pdflatex
% !TEX root = ../tesis.tex
%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%
%% DOCUMENT CLASS DEFINITIONS
%%%%%%%%%%%%%

\documentclass[b5paper,11pt]{book}
%\documentclass[a4paper,twoside,11pt,titlepage]{book}

%%%%%%%%%%%%%%%%%
%% INFORMACIÓN TESIS
%%%%%%%%%%%%%%%%%
\newcommand{\myTitle}{Thesis Title \xspace}
\newcommand{\mySubtitle}{Thesis\xspace}
\newcommand{\myDegree}{International PhD Degree in ...\xspace}
\newcommand{\myProgram}{Doctorate program \xspace}
\newcommand{\myName}{Author's name \xspace}
\newcommand{\myProf}{First Supervisor \xspace}
\newcommand{\myOtherProf}{Second Supervisor\xspace}
\newcommand{\myFaculty}{School of ... \xspace}
\newcommand{\myDepartment}{Department\xspace}
\newcommand{\myUni}{University of XXX \xspace}
\newcommand{\myLocation}{City \xspace}
\newcommand{\myTime}{Date of defense \xspace}


%%%%%%%%%%%%%
%% FONT
%%%%%%%%%%%%%
% https://tex.stackexchange.com/questions/426279/fontfamily-selectfont-does-not-work-with-xelatex-engine
% https://tug.org/FontCatalogue/sansseriffonts.html
% https://tug.org/FontCatalogue/

\usepackage[T1]{fontenc} 
\usepackage[utf8]{inputenc} 
\usepackage{libertine} 
\usepackage{libertinust1math} 

\usepackage[spanish,es-lcroman,english]{babel} 
\usepackage{microtype}


%%%%%%%%%%%%%%%%%%%
%% DESIGN SETTINGS
%%%%%%%%%%%%%%%%%%%
\usepackage{geometry}
  \geometry{
    paper=b5paper, % tamaño del papel
  	twoside, 
  	includehead, 
  	includefoot, 
  	right=20mm, left=20mm, 
  	bottom=10mm, 
  	bindingoffset=3mm,
  	top=10mm,   
  }


\geometry{hscale=0.75,vscale=0.8}

\geometry{textwidth=127.4818mm}


%%%%%%%%%%%%%
%% GRAPHICS
%%%%%%%%%%%%%
\usepackage{graphicx}    
\usepackage{subcaption} 
\usepackage{caption}
\captionsetup{
    font=small,
    labelfont={bf}
}

\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing}

%%%%%%%%%%%%%
%% TABLES
%%%%%%%%%%%%%    
\usepackage{booktabs} 

\usepackage{multirow} 

\usepackage{longtable} 

\usepackage{colortbl} 

\newcommand{\letratabla}{\fontsize{9}{11}\selectfont}

\usepackage{placeins}


%%%%%%%%%%%%%
%% MATH
%%%%%%%%%%%%

\usepackage{amssymb, amsmath, amsbsy}
\DeclareMathOperator{\sign}{sign} 


\usepackage[boxed]{algorithm2e} 
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{example}{Example}[chapter]
\newtheorem{definition}{Definition}[chapter]


\decimalpoint 

\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother




%%%%%%%%%%%%%%%
%% STYLE
%%%%%%%%%%%%%%%

%%% Definicion de COLORES
\definecolor{gray97}{gray}{.97}
\definecolor{gray85}{gray}{.85}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}
\definecolor{plum_trad}{rgb}{0.56, 0.27, 0.52} 

\usepackage{indentfirst}

%%% Separate specific names
\hyphenation{A-na-to-mi-cal io-flu-pane lan-gua-ge Wi-lliams me-ta-bo-lic pipe-line}
\hyphenation{a-ccor-ding}
\hyphenation{ac-ti-vi-ty}
\hyphenation{ana-ly-ses}
\hyphenation{ana-ly-sis}
\hyphenation{cha-llen-ge}
\hyphenation{con-fi-gu-ra-tion}  
\hyphenation{co-rrec-ting}  
\hyphenation{du-mmi-es}  
\hyphenation{e-xa-mi-na-tion}  
\hyphenation{em-pi-ri-cal}  
\hyphenation{ins-ti-tu-tion} 
\hyphenation{i-ma-ge}
\hyphenation{neuro-i-ma-ging}
\hyphenation{i-ma-ging}
\hyphenation{ho-we-ver} 
\hyphenation{hy-po-the-sis} 
\hyphenation{fi-gu-re}  
\hyphenation{fo-llo-wed}   
\hyphenation{li-mi-ta-tion}
\hyphenation{ne-ver-the-less}  
\hyphenation{u-sing}  
\hyphenation{re-pre-sents}  
\hyphenation{pro-blems}  
\hyphenation{va-li-da-tion}  


\usepackage{enumitem}

%%% ENUMERACIÓN de SECCIONES
\setcounter{secnumdepth}{4} 
\setcounter{tocdepth}{3} 

\usepackage{minitoc}
\mtcsettitle{minitoc}{} 



%%%%%%%%%%%%%%%%%%%%%%%%
%% HEADER AND FOOT PAGE
%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}

\usepackage[stable]{footmisc} 

\fancypagestyle{plain}{
  \fancyhf{} 
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot[CO,CE]{\textcolor{gray45}{\thepage}} % 
}


\pagestyle{fancy}
% O: odd E: even impar/par
% R: right L: left C: centre
\fancyhf{} 

\renewcommand{\chaptermark}[1]{\markboth{#1}{}} 
\renewcommand{\sectionmark}[1]{\markright{\thesection. #1}}


\fancyhead[LE]{\footnotesize\itshape\nouppercase{\leftmark}}
\fancyhead[RO]{\footnotesize\itshape\nouppercase{\rightmark}}
\setlength{\headheight}{14.5pt} 

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}


\fancyfoot[CO,CE]{\thepage}

\usepackage{etoolbox}
\makeatletter
\patchcmd{\f@nch@head}{\rlap}{\color{gray45}\rlap}{}{}
\patchcmd{\headrule}{\hrule}{\color{gray85}\hrule}{}{}
\patchcmd{\f@nch@foot}{\rlap}{\color{gray45}\rlap}{}{}
\makeatother

% BLANK PAGES
\makeatletter
\def\clearpage{%
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother

%%%%%%%%%%%%%
%%  TITLES
%%%%%%%%%%%%%

\usepackage{titlesec}
  
\newcommand{\hsp}{\hspace{15pt}}    
\titleformat{\chapter}[hang]
{\Huge\bfseries}{\textcolor{gray45}{\thechapter}\hsp\textcolor{gray45}{|}\hsp}{0pt}{\LARGE\bfseries\MakeUppercase}

\titleformat{\part}[display]
{\centering\huge\bfseries}
{Part \thepart}
{1em}
{\Huge\bfseries\MakeUppercase}

\assignpagestyle{\part}{empty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% INDEX
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage{tocloft} 

\setlength{\cftfigindent}{0pt} 
\renewcommand{\cftfigpresnum}{Figure } 
\addtolength{\cftfignumwidth}{3.5em} 

\setlength{\cfttabindent}{0pt} 
\renewcommand{\cfttabpresnum}{Table } 
\addtolength{\cfttabnumwidth}{2.5em} 


%%%%%%%%%%%%%
%%  REFERENCES
%%%%%%%%%%%%
\usepackage{url} 

\usepackage[bookmarks = true, colorlinks=true, linkcolor = black, citecolor = black, menucolor = black, urlcolor = black]{hyperref} 

\hypersetup{
pdfauthor = {\myName email},
pdftitle = {\myTitle},
pdfsubject = {},
pdfkeywords = {aaaa, bbbb},
pdfcreator = {LaTeX},
pdfproducer = {pdflatex}
}


%%%%%%%%%%%%%
%% CODE
%%%%%%%%%%%%%
\usepackage{listings} 

\lstset{ frame=Ltb,                 
     framerule=0.5pt,              
     aboveskip=0.5cm,             
     framextopmargin=3pt,     
     framexbottommargin=3pt, 
     framexleftmargin=0.1cm, 
     framesep=0pt, 
     rulesep=.4pt, 
     backgroundcolor=\color{gray97}, 
     rulesepcolor=\color{black}, 
     stringstyle=\ttfamily, 
     showstringspaces = false, 
     basicstyle=\scriptsize\ttfamily, 
     commentstyle=\color{gray45}, 
     keywordstyle=\bfseries, 
     %
     numbers=left, 
     numbersep=6pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true, 
   }
 
\lstnewenvironment{listing}[1][] 
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]} 


\lstdefinestyle{CodigoC}
   {
	basicstyle=\scriptsize,
	frame=single,
	language=C,
	numbers=left
   }
\lstdefinestyle{CodigoC++}
   {
	basicstyle=\small,
	frame=single,
	backgroundcolor=\color{gray30},
	language=C++,
	numbers=left
   }

 
\lstdefinestyle{Consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray30},
    frame=single,
    numbers=none
   }


\newcommand{\bigrule}{\titlerule[0.5mm]}


%%%%%%%%%%%%%
%%  GLOSSARY
%%%%%%%%%%%%

\usepackage[smaller,printonlyused]{acronym} 



%%%%%%%%%%%%%
%%  BIBLIOGRAPHY
%%%%%%%%%%%%
\usepackage{bibentry} 
\nobibliography*

\usepackage{breakcites} 

